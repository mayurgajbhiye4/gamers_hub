{% extends 'base.html' %}
{% block content %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gamers Hub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/home.css">
    <link rel="stylesheet" href="/static/feed.css">
    <link rel="stylesheet" href="/static/sidebar.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
    <div class="app-container container-fluid">
        <div class="row vh-100 g-0">
          <!-- Sidebar -->
          <nav class="col-xxl-2 col-xl-3 col-lg-3 bg-white sidebar d-flex flex-column">
            <div class="position-sticky" style="top: 20px;">
              <a class="navbar-brand my-3" href="{% url 'profile' request.user.username %}">
                <img src="{{  request.user.userprofile.avatar.url}}" class="rounded-circle me-2" alt="Avatar" width="40" height="40">
                <strong>@{{ request.user.username }}</strong> 
              </a>  
              <ul class="nav flex-column mt-4">
                <li class="nav-item">
                  <a class="nav-link text-danger" href="/"><i class="bi bi-file-text me-2"></i> Home</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link text-danger" href="{% url 'following' %}"><i class="bi bi-people me-2"></i> Following</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link text-danger" href="#"><i class="bi bi-people me-2"></i>Notifications</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link text-danger" href="#"><i class="bi bi-bookmark me-2"></i> Saved</a>
                </li>
                <li class="nav-item">
                  <a href="#" class="nav-link text-danger" data-bs-toggle="modal" data-bs-target="#logoutModal">
                    <i class="bi bi-box-arrow-right me-2"></i>Log Out
                  </a>
                </li>
              </ul>
              <button class="btn btn-success w-100 mt-4" data-bs-toggle="modal" data-bs-target="#createPostModal">
                Create Post
              </button>
            </div>
          </nav>

        <!-- Create Post Modal -->
        <div class="modal fade" id="createPostModal" tabindex="-1" aria-labelledby="createPostModalLabel" aria-hidden="true">
          <div class="modal-dialog">
              <div class="modal-content">
                  <div class="modal-header">
                      <h5 class="modal-title" id="createPostModalLabel">Create a Post</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <form method="POST" action="{% url 'create_post' %}" enctype="multipart/form-data">
                      {% csrf_token %}
                      <div class="modal-body">
                          <textarea name="text" class="form-control mb-3" placeholder="What's on your mind?" maxlength="1000" required></textarea>

                          <label>Upload Image (Max: 20MB)</label>
                          <input type="file" name="image" class="form-control mb-3" accept="image/*">

                          <label>Upload Video (Max: 200MB)</label>
                          <input type="file" name="video" class="form-control mb-3" accept="video/*">
                      </div>
                      <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                          <button type="submit" class="btn btn-primary">Post</button>
                      </div>
                  </form>
              </div>
          </div>
        </div>

        {% if form.errors %}
          <div class="alert alert-danger">
            <ul>
              {% for field, errors in form.errors.items %}
                {% for error in errors %}
                  <li>{{ error }}</li>
                {% endfor %}
              {% endfor %}
            </ul>
          </div>
        {% endif %}

          <!-- Bootstrap Logout Confirmation Modal -->
          <div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="logoutModalLabel">Log Out</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  Are you sure you want to log out?
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                  <form method="post" action="{% url 'logout' %}">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger">Log Out</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
      
          <!-- Main Content -->
          <main class="col-xxl-7 col-xl-6 col-lg-6 px-4 main-content">
            <div class="container mt-5">
              <h3 class="mb-4">All Posts</h3>
              <!-- Post Cards -->
              <div class="card mb-4">
                <div class="card-body">
                  <div class="d-flex align-items-center">
                    <img src="https://via.placeholder.com/50" alt="User" class="rounded-circle me-3">
                    <div>
                      <strong>Ayush Kumar</strong> <span class="text-muted">@ayush</span>
                      <span class="text-muted">· 6:20 p.m. Oct 09 2020</span>
                    </div>
                  </div>
                  <p class="mt-3">It's better to have loved and lost than never to have loved at all.<br> - By Alfred Tennyson</p>
                </div>
              </div>
            
              <!-- Another Post -->
              <div class="card mb-4">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <img src="https://via.placeholder.com/50" alt="User" class="rounded-circle me-3">
                        <div>
                            <strong>Ishika Arya</strong> <span class="text-muted">@ishikaarya</span> 
                            <span class="text-muted">· 6:01 p.m. Oct 09 2020</span>
                        </div>
                    </div>
                    <p class="mt-3">I'm a lazy texter 😬, unless you are my baby 😍 or my bestfriend 😂</p>
                    <div class="d-flex justify-content-between">
                        <span><i class="bi bi-heart text-muted"></i> 1</span>
                        <span><i class="bi bi-chat text-muted"></i> 0</span>
                        <span><i class="bi bi-bookmark text-muted"></i></span>
                    </div>
                </div>
            </div>
    
            <!-- Post with Image -->
            <div class="card mb-4">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <img src="https://via.placeholder.com/50" alt="User" class="rounded-circle me-3">
                        <div>
                            <strong>Victoria Pedretti</strong> <span class="text-muted">@victoria</span> 
                            <span class="text-muted">· 5:38 p.m. Oct 09 2020</span>
                        </div>
                    </div>
                    <p class="mt-3">McDonald's french fries are not real food.<br>
                        Just found one under my car seat from two months ago and it looked perfect.<br>
                        Tasted fine, too.
                    </p>
                    <img src="https://via.placeholder.com/500x300" class="img-fluid rounded mb-3" alt="Fries">
                    <div class="d-flex justify-content-between">
                        <span><i class="bi bi-heart text-muted"></i> 0</span>
                        <span><i class="bi bi-chat text-muted"></i> 0</span>
                        <span><i class="bi bi-bookmark text-muted"></i></span>
                    </div>
                </div>
            </div>

            <!-- Post with Image -->
            <div class="card mb-4">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <img src="https://via.placeholder.com/50" alt="User" class="rounded-circle me-3">
                        <div>
                            <strong>Victoria Pedretti</strong> <span class="text-muted">@victoria</span> 
                            <span class="text-muted">· 5:38 p.m. Oct 09 2020</span>
                        </div>
                    </div>
                    <p class="mt-3">McDonald's french fries are not real food.<br>
                        Just found one under my car seat from two months ago and it looked perfect.<br>
                        Tasted fine, too.
                    </p>
                    <img src="https://via.placeholder.com/500x300" class="img-fluid rounded mb-3" alt="Fries">
                    <div class="d-flex justify-content-between">
                        <span><i class="bi bi-heart text-muted"></i> 0</span>
                        <span><i class="bi bi-chat text-muted"></i> 0</span>
                        <span><i class="bi bi-bookmark text-muted"></i></span>
                    </div>
                </div>
            </div>

            <!-- Post with Image -->
            <div class="card mb-4">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <img src="https://via.placeholder.com/50" alt="User" class="rounded-circle me-3">
                        <div>
                            <strong>Victoria Pedretti</strong> <span class="text-muted">@victoria</span> 
                            <span class="text-muted">· 5:38 p.m. Oct 09 2020</span>
                        </div>
                    </div>
                    <p class="mt-3">McDonald's french fries are not real food.<br>
                        Just found one under my car seat from two months ago and it looked perfect.<br>
                        Tasted fine, too.
                    </p>
                    <img src="https://via.placeholder.com/500x300" class="img-fluid rounded mb-3" alt="Fries">
                    <div class="d-flex justify-content-between">
                        <span><i class="bi bi-heart text-muted"></i> 0</span>
                        <span><i class="bi bi-chat text-muted"></i> 0</span>
                        <span><i class="bi bi-bookmark text-muted"></i></span>
                    </div>
                </div>
            </div>

            </div>
          </main>
      
          <!-- Aside Content -->
          <aside class="col-xxl-3 col-xl-3 col-lg-3 px-3 d-flex flex-column">
            <div class="position-sticky" style="top: 20px;">
              <div class="search-bar mb-4">
                <input type="text" class="form-control" placeholder="Search Network">
              </div>
      
              <div class="suggestions-card card p-3">
                <h5 class="mb-3">You might know</h5>
                <div class="d-flex align-items-center mb-3">
                  <img src="https://via.placeholder.com/40" alt="Profile" class="rounded-circle me-2">
                  <div class="flex-grow-1">
                    <strong>Ishika Arya</strong><br><span class="text-muted">@ishikaarya</span>
                  </div>
                  <button class="btn btn-outline-success btn-sm">Follow</button>
                </div>
              </div>
            </div>
          </aside>
        </div>
      </div>
      

    <style>
        .app-container {
          max-width: 1200px;
          margin: 0 auto;
          background-color: #f8f9fa;
        }
      
        .sidebar {
          position: sticky;
          top: 0; 
          height: 100vh;
          overflow-y: auto;
        }
      
        .main-content {
          overflow-y: auto;
        }
      
        .vh-100 {
          height: 100vh;
        }
      
        @media (max-width: 991px) {
          .sidebar, .main-content, aside {
            height: auto;
          }
        }
    </style>
      
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>

{% endblock %}
