{% extends 'base.html' %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gamer Profile - Gamers Hub</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: hsl(0, 5%, 88%);
      color: #060606;
    }
    .sidebar {
      height: 100vh;
      background-color: #eaecf0;
      border-right: 1px solid #eaedef;
    }
    .sidebar a {
      text-decoration: none;
      color: #040404;
      font-weight: 500;
      padding: 15px;
      display: block;
    }
    .sidebar a:hover {
      background-color: #7289da;
      color: white;
    }
    .profile-pic {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #7289da;
    }
    .post-card {
      background-color: #c5c5c5;
      margin-bottom: 20px;
      border: none;
    }
    .btn-create-post {
      background-color: #7289da;
      border: none;
      color: white;
    }
    .btn-create-post:hover {
      background-color: #5b6ea7;
    }
    hr {
      border-top: 1px solid #131313;
    }
  </style>
</head>
<body>
  <div class="container-fluid">
    <div class="row">
      <!-- Sidebar -->
      <div class="col-md-3 sidebar">
        <div class="d-flex flex-column align-items-center py-4">
          <img src="{{ request.user.userprofile.avatar.url }}" alt="User Avatar" class="profile-pic mb-3">
          <h5>@{{ request.user.username }}</h5>
        </div>
        <div class="list-group list-group-flush">
          <a href="{% url 'home' %}">üè† Home</a>
          <a href="#">üêª‚Äç‚ùÑÔ∏è Followers</a>
          <a href="#">üëΩ Following</a>  
        </div>
        <div class="mt-auto p-4">
          <button class="btn btn-create-post w-100">Create New Post</button>
        </div>
      </div>

      <!-- Profile Content -->
      <div class="col-md-9">
        <div class="py-4 px-5">
          <div class="d-flex align-items-center">
            <img src="{{ request.user.userprofile.avatar.url }}" class="profile-pic me-4" alt="Profile Picture">
            <div>
              <h3>{{ first_name }} {{ last_name }}</h3>
              <p>@{{ request.user.username }}</p>
              <button class="btn btn-primary">Edit Profile</button>
            </div>
          </div>

          <hr>

          <div class="mt-4">
            <h4>Recent Posts</h4>
            
                  <div class="posts-list">
                    {% for post in posts %}
                        <div class="post-item mb-3 p-3 rounded bg-light">
                            <div class="d-flex align-items-center mb-2">
                                <img src="{{ post.author.userprofile.avatar.url }}" class="rounded-circle me-2" alt="Avatar" width="50" height="50">
                                <div>
                                    <strong>{{ post.author.first_name }} {{ post.author.last_name }}</strong> 
                                    <span class="text-muted">{{ post.timestamp|timesince }} ago</span>
                                </div>
                            </div>
                            <p>{{ post.text }}</p>
                            {% if post.image %}
                                <img src="{{ post.image.url }}" class="rounded float-right" style="max-width: 50%" alt="Post Image">
                            {% endif %}
                            {% if post.gif %}
                                <img src="{{ post.gif.url }}" class="rounded float-right" style="max-width: 50%;" alt="GIF">
                            {% endif %}
                            {% if post.video %}
                                <video width="500" height="250" controls>
                                    <source src="{{ post.video.url }}" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                            {% endif %}
                            {% if post.emoji %}
                                <span>{{ post.emoji }}</span>
                            {% endif %}
                        </div>
                    {% empty %}
                        <p class="text-muted">No posts yet.</p>
                    {% endfor %}
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
{% endblock %}